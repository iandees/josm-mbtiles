plugins{
  id 'org.openstreetmap.josm.gradle.plugin' version '0.1.6'
}
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'java'

apply from: 'gradle/version-functions.gradle'

sourceCompatibility = '1.8'
version = getVersionName()

repositories {
  jcenter()
}

dependencies {
  packIntoJar 'org.xerial:sqlite-jdbc:3.20.0'

  testImplementation (name: 'josm-unittest'){changing=true}
  testImplementation 'junit:junit:4.12'
}

sourceSets {
  main {
    java {
      srcDirs = ['src']
    }
    resources {
      srcDirs = ["$projectDir"]
      include 'data/**'
      include 'images/**'
      include 'README'
    }
  }
}

josm {
  debugPort = 4139
  jarName = 'mbtiles.jar'
}

eclipse.project.name = 'JOSM-mbtiles'
eclipseClasspath.dependsOn cleanEclipseClasspath
eclipseProject.dependsOn cleanEclipseProject

tasks.withType(Javadoc) {
  failOnError false
}
